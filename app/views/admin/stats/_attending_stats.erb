<div id="app-stats">
    <div class="column">
        <article>
            <div>
                <div class="title-wrap">
                  <h1 class="section-head">Gender</h1>
                  <div class="hline"></div>
                </div>
                <div class="horizontal-bar-graph" id="gender-graph"></div>
                <table id="my-final-table" class="display dataTable" cellspacing="0" width="100%" role="grid">
                <thead>
                    <tr>
                        <th>Gender</th>
                        <th>Count</th>
                    </tr>
                </thead>

                <tbody>
                    <% @gender_count.each_with_index do |gender_count, index|  %>
                    <tr>
                        <td><%= gender_count[0] %></td>
                        <td><%= gender_count[1] %> or <%= number_to_percentage(100*(gender_count[1].to_f / @total_apps ),precision: 1) %></td>
                    </tr>
                    <% end %>
                </tbody>

            </table>
            </div>
        </article>

        <article>
            <div class="title-wrap">
              <h1 class="section-head">Age</h1>
              <div class="hline"></div>
            </div>
            <div id="age-graph">
            </div>
            <div class="row">
                <table id="my-final-table" class="display dataTable" cellspacing="0" width="100%" role="grid">
                    <thead>
                        <tr>
                            <th>Age</th>
                            <th>Count</th>
                        </tr>
                    </thead>

                    <tbody>
                        <% @age_count.each_with_index do |age_count, index|  %>
                            <% if age_count[0] < 18 %>
                                <tr>
                                    <td class="minorhighlight"><%= age_count[0].to_i %>
                                    </td>
                                    <td class="minorhighlight"><%= age_count[1] %>
                                        or <%= number_to_percentage(100* age_count[1].to_f / @total_apps.to_f, precision: 1) %>
                                    </td>
                                </tr>
                            <% else %>
                                <tr>
                                    <td><%= age_count[0].to_i %></td>
                                    <td><%= age_count[1] %>
                                        or <%= number_to_percentage(100* age_count[1].to_f / @total_apps.to_f, precision: 1) %>
                                    </td>
                                </tr>
                            <% end %>
                        <% end %>
                    </tbody>

                </table>
                <p class="">
                    There are <strong><%= @minor_count %> minors</strong>, which make up <strong><%= number_to_percentage(100*@minor_count.to_f / @age_count.inject(0){|sum,e| sum += e[1] }, precision: 1) %></strong> of attendees.
                    <br>There are <strong><%= @adult_count %> adults</strong>, which make up <strong><%= number_to_percentage(100*@adult_count.to_f / @age_count.inject(0){|sum,e| sum += e[1] }, precision: 1) %></strong> of attendees.
                </p>
            </div>
        </article>
    </div>

    <div class="column">
        <article>
            <div class="title-wrap">
              <h1 class="section-head">Universities</h1>
              <div class="hline"></div>
            </div>
            <div class="horizontal-bar-graph" id="university-graph"></div>
            <table id="my-final-table" class="display dataTable" cellspacing="0" width="100%" role="grid">
                <thead>
                    <tr>
                        <th>University</th>
                        <th>Count</th>
                    </tr>
                </thead>

                <tbody>
                    <% @uni_applicants[0..20].each_with_index do |uni_applicants, index|  %>
                    <tr>
                        <td><%= uni_applicants[0] %></td>
                        <td><%= uni_applicants[1] %> or <%= number_to_percentage(100*(uni_applicants[1].to_f / @uni_applicants.inject(0){|sum,e| sum += e[1]}), precision: 1) %></td>
                    </tr>
                    <% end %>
                </tbody>
            </table>
            <div class="tablefooter">
                *top 20
            </div>
            <p>There are <strong><%= @international_count %> international students</strong>, which make up <strong><%= number_to_percentage(100*(@international_count.to_f / @uni_applicants.inject(0){|sum,e| sum += e[1]}), precision: 1) %></strong> of applicants.</p>

        </article>

        <article>
            <div class="title-wrap">
              <h1 class="section-head">Majors</h1>
              <div class="hline"></div>
            </div>
            <div class="horizontal-bar-graph" id="major-graph"></div>
            <div class="row">
                <table id="my-final-table" class="display dataTable" cellspacing="0" width="100%" role="grid">
                    <thead>
                        <tr>
                            <th>Major</th>
                            <th>Count</th>
                        </tr>
                    </thead>

                    <tbody>
                        <% @major_count.each_with_index do |major_count, index|  %>
                        <tr>
                            <td><%= major_count[0] %></td>
                            <td><%= major_count[1] %> or <%= number_to_percentage(100*major_count[1].to_f / @total_apps, precision: 1) %></td>
                        </tr>
                        <% end %>
                    </tbody>

                </table>
            </div>

        </article>
    </div>

    <div class="title-wrap">
      <h1 class="section-head">Grade Level</h1>
      <div class="hline"></div>
    </div>
    <div class="column">
        <article>
            <table id="my-final-table" class="display dataTable" cellspacing="0" width="100%" role="grid">
                <thead>
                    <tr>
                        <th>Grade</th>
                        <th>Percent</th>
                    </tr>
                </thead>
                <tbody>
                    <% @uni_grade_count.each_with_index do |uni_grade_count, index|  %>
                            <tr>
                                <td><%= uni_grade_count[0] %></td>
                                <td><%= uni_grade_count[1] %> or <%= number_to_percentage(100*uni_grade_count[1].to_f / @uni_grade_count.inject(0){|sum,e| sum += e[1] }, precision: 1) %></td>
                            </tr>
                    <% end %>
                </tbody>
            </table>
        </article>

        <article>
            <div class="horizontal-bar-graph" id="grade-graph"></div>
        </article>
    </div>

    <br>

    <div class="title-wrap">
      <h1 class="section-head">Number of Hackathons Attended</h1>
      <div class="hline"></div>
    </div>
    <div class="column">
        <article>
            <table id="my-final-table" class="display dataTable" cellspacing="0" width="100%" role="grid">
                <thead>
                    <tr>
                        <th>Number</th>
                        <th>Frequency</th>
                    </tr>
                </thead>

                <tbody>
                    <% @hackathons_count.each_with_index do |hackathons_count, index|  %>
                        <tr>
                            <td><%= hackathons_count[0] %></td>
                            <td><%= hackathons_count[1] %> or <%= number_to_percentage(100*hackathons_count[1].to_f / @hackathons_count.inject(0){|sum,e| sum += e[1] }, precision: 1) %></td>
                        </tr>
                    <% end %>
                </tbody>
            </table>
            <p>The most popular Hackathon was <strong><%= @hackathons_attended[0][0] %></strong>, listed in <strong><%= @hackathons_attended[0][1] %></strong> applications.</p> 
        </article>

        <article>
            <div class="horizontal-bar-graph" id="hackathon-graph"></div>
        </article>
    </div>

    <div class="row">
        <br><br><br><br>
        <!-- Random reason to attend -->
        <p><%= @random_reason[0] %></p>
        <p>-<%= @random_reason[1] %> <%= @random_reason[2] %></p>
    </div>

    <div class="row wordmap">
        <br><br><br><br><br><br><br>
        <div class="center">
            <div id="example" style="width: 100%; height: 600px;"></div>
        </div>
        <br><br><br><br><br><br><br>
    </div>

    <div class="row" id="hide-on-mobile">
        <div class="title-wrap">
          <h1 class="section-head">Daily Number of Applications</h1>
          <div class="hline"></div>
        </div>
        <div class="center" id="applications-graph">
        </div>
    </div>
</div>